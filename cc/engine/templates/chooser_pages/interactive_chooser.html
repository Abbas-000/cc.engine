{% extends "macros_templates/engine.html" %}
{% block title %}Choose a License{% endblock title %}
{% block headers %}
  <link rel="stylesheet" type="text/css"
        href="{{ request.staticdirect('includes/zero.css') }}" />
  <link rel="stylesheet" type="text/css"
        href="/wp-content/themes/creativecommons.org/engine.css" />
  <script src="/wp-content/themes/creativecommons.org/js/libs/jquery-1.6.2.min.js"></script>

  <script type="text/javascript">

// Symbol table for the interactive license chooser.
var CHOOSER = {
    "LIVE" : false,

    "WIRING" : {
        // This is used to bind functions to input elements.
        "watching" : {
            'radio' : [
                'field_commercial',
                'field_derivatives'
            ],
            'select' : [
                'field_jurisdiction',
                'field_format'
            ],
            'text' : [
                'field_worktitle',
                'field_attribute_to_name',
                'field_attribute_to_url',
                'field_sourceurl',
                'field_morepermissionsurl'
            ]
        },
        // This is used to set up multiple views for the bottom right panel.
        // hint -> {"input name" : [default visibility, corresponding #id],}
        "metadata" : {
            "html+rdfa" : [true, "#for_htmlrdfa"],
            "xmp" : [false, "#for_xmp"],
            "offline" : [false, "#for_offline"]
        }
    },

    // Timers
    "TIMER" : {
        "ping" : -1
    },

    // These are values used for generating output
    "STATE" : {
        "current" : {},   // current state of input elements
        "metadata" : {},  // values entered for metadata fields
        "htmlrdfa_template" : "",
        "large_icon" : "",
        "small_icon" : "",
        "icon_is_small" : false,
        "query_string" : ""
    },

    // Constants
    "CONST" : {
        "img_path" : "/wp-content/themes/creativecommons.org/images/",
        "fc_approved" : "/wp-content/themes/creativecommons.org/images/fc_approved_small.png",
        "fc_denied" : "/wp-content/themes/creativecommons.org/images/fc_questionable.png"
    },

    // Templates (may or may not be constants)
    "TEMPLATE" : {
        "htmlrdfa" : "",
        "nondigital" : '{%- trans license_name="LICENSE_NAME", license_url="LICENSE_URL" %}This work is licensed under the Creative Commons {{ license_name }} License. To view a copy of this license, visit {{ license_url }} or send a letter to Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.{% endtrans -%}'
    },

    // Functions
    "CALL" : {
        "ping" : false,
        "delayed_ping" : false,
        "refresh_ui" : false,
        "refresh_state" : false
    },

    // Callbacks
    "CALLBACK" : {
        "main" : false,
        "ping" : false
    }
};




// CSS adjustments and ui event wiring.
$(document).ready(
CHOOSER.CALLBACK.main = function () {
    "use strict";

    // height correction on overflowing boxes
    var max_height = function (lhs, rhs) {
        var a = lhs.innerHeight();
        var b = rhs.innerHeight();
        if (a > b) { return a; }
        else { return b; }
    };
    var query = function (row, col) {
        try {
            var q = ".ui_row:nth-of-type(" + row + ")";
            q += " .ui_box:nth-of-type(" + col + ")";
            return $(q);
        }
        catch (err) {
            // IE8 hack // 8^y
            console.warn(err);
            return $("#"+$(".ui_row .ui_box")[col-1 + (row-1)*2].id);
        }
    };
    for (var i=1; i<=2; i+=1) {
        var height = max_height(query(i, 1), query(i, 2));
        query(i, 1).height(height);
        query(i, 2).height(height);
    }

    // set initial cgi state
    CHOOSER.CALL.refresh_state();

    // setup events
    var key, i, k, watched, selected, found, etc;
    for (key in CHOOSER.WIRING.watching) {
        if (!CHOOSER.WIRING.watching.hasOwnProperty(key)) { continue; }
        watched = CHOOSER.WIRING.watching[key];
        for (i=0; i<watched.length; i+=1) {
            selected = $("[name="+watched[i]+"]");
            selected.change(CHOOSER.CALL.ping);
            if (key ==="text") {
                selected.keyup(CHOOSER.CALL.delayed_ping);
            }
        }
    }
    etc = ["field_metadata_standard", "field_iconsize"];
    for (i=0; i<etc.length; i+=1) {
        selected = $("[name="+etc[i]+"]");
        selected.change(CHOOSER.CALL.refresh_ui);
    }

    // Ping the server for updates.  This populates some of the CHOOSER.STATE vars, too.
    CHOOSER.CALL.ping(true);
    CHOOSER.LIVE = true;
});




// Calls to the server are minimized by having the server generate templates,
// and filling them in here each time the text in a field changes.
CHOOSER.CALL.refresh_ui = function (event_ctx, data) {
    "use strict";
    var name, value, buffer, format, metakind;

    // Update cc badge icons
    CHOOSER.STATE.icon_is_small = $("[name=field_iconsize]")[1].checked;
    $("#license #badge")[0].src = CHOOSER.STATE.icon_is_small ? CHOOSER.STATE.small_icon : CHOOSER.STATE.large_icon;

    // Change the bottom right panel for the correct metadata format
    metakind = $("#metadata_format")[0].value;
    if (!CHOOSER.WIRING.metadata[metakind][0]) {
        for (format in CHOOSER.WIRING.metadata) {
            if (CHOOSER.WIRING.metadata.hasOwnProperty(format)) {
                CHOOSER.WIRING.metadata[format][0] = format == metakind;
                $(CHOOSER.WIRING.metadata[format][1])[0].style.display = format == metakind ? "block" : "none";
            }
        }
    }

    // Update xmp download link
    $("#xmp_download_link")[0].href = "/choose/metadata.xmp?" + CHOOSER.STATE.query_string;

    // Update generated html for html+rdfa
    buffer = CHOOSER.TEMPLATE.htmlrdfa;
    for (name in CHOOSER.STATE.metadata) {
        if (!CHOOSER.STATE.metadata.hasOwnProperty(name)) { continue; }
        value = CHOOSER.STATE.metadata[name];
        while (buffer.indexOf(name) !== -1) {
            buffer = buffer.replace(name, value);
        }
    }
    if (CHOOSER.STATE.icon_is_small) {
        buffer = buffer.replace("88x31.png", "80x15.png");
    }
    $("#codetocopy")[0].value = buffer;
    $("#for_htmlrdfa .results-preview")[0].innerHTML = "<div>" + buffer + "</div>";

    // If additional callback data is available, update related fields as well:
    if (data != undefined) {
        $(".fc_status")[0].src = data.libre ? CHOOSER.CONST.fc_approved : CHOOSER.CONST.fc_denied;
        $("#license .whatis")[0].style.display = data.libre ? "block" : "none";
        $("#license .whynot")[0].style.display = data.libre ? "none" : "block";
        $("#license_title")[0].innerHTML = data.license_title;
        $("#xmp_license_name")[0].innerHTML = data.license_title;
        $("#badge_link")[0].href = data.uri;
        $("#license_title")[0].href = data.uri;
        buffer = CHOOSER.TEMPLATE.nondigital;
        buffer = buffer.replace("LICENSE_NAME", data.license_title);
        buffer = buffer.replace("LICENSE_URL", data.uri);
        $("#infotocopy")[0].value = buffer;
    }
};




// Callback to update the UI & state based on the response from the server.
CHOOSER.CALLBACK.ping = function (data) {
    "use strict";

    // update state
    CHOOSER.TEMPLATE.htmlrdfa = data.license_html;
    CHOOSER.STATE.large_icon = data.license_logo;
    CHOOSER.STATE.small_icon = data.license_slim_logo;
    
    // refresh ui
    CHOOSER.CALL.refresh_ui(undefined, data);
};




// Poll the server for license and metadata info.  Checks for relevance, first.
CHOOSER.CALL.ping = function (force) {
    "use strict";

    var state_changed= CHOOSER.CALL.refresh_state();
    CHOOSER.CALL.refresh_ui();
    if (state_changed || force === true) { 
        $.getJSON('./xhr_api', CHOOSER.STATE.current, CHOOSER.CALLBACK.ping);
    }
};




// Calls a ping in 100ms, but do not schedule more than one at a time.
CHOOSER.CALL.delayed_ping = function () {
    "use strict";

    if (CHOOSER.TIMER.ping === -1) {
        CHOOSER.TIMER.ping = setTimeout(function () {
            CHOOSER.TIMER.ping = -1;
            CHOOSER.CALL.ping();
        }, 100);
    }
};




// This function updates the values of CHOOSER.state vars current, query_string, and metadata.
// Returns True if CHOOSER.state has changed, otherwise returns false.
CHOOSER.CALL.refresh_state = function () {
    "use strict";

    var attrib = function (attr, value) { return "["+attr+"="+value+"]"; };
    var state = {}, query, node, name, type, i, k, key, found, fail, query_string, query_part;
    var field_by_type = [];
    query_string = "";

    // for each type of form field we are watching...
    for (key in CHOOSER.WIRING.watching) {
        if (!CHOOSER.WIRING.watching.hasOwnProperty(key)) { continue; }
        field_by_type = CHOOSER.WIRING.watching[key];
        query_part = "";

        // some vars used to generate a jquery query...
        if (key === "select") {
            node = key;
            type = false;
        }
        else {
            node = "input";
            type = key;
        }

        // for each form field in the given type...
        for (i=0; i<field_by_type.length; i+=1) {

            // Build and query the jquery query...
            name = field_by_type[i];       
            query = node + attrib("name", name);
            if (!!type) { query += attrib("type", type); }
            if (type === "select") { 
                query += ">option[selected=selected]";
            }
            found = $(query);
            if (found.length === 0) {
                throw ("$( "+query+" ) returned no results!");
            }

            // Then, Extract a useful value from "found"...
            if (type === "radio") {
                // If the field type is 'radio', then found is a list.
                fail=true;
                // iterate on 'found' list to find the value we care about...
                for (k=0; k<found.length; k+=1) {
                    if (found[k].checked) {
                        found = found[k].value;
                        fail = false;
                        break;
                    }
                }
                if (fail) {
                    throw ("$( "+query+" ) returned no checked radio buttons!");
                }
            }
            else {
                // The fiel type was not 'radio', so just grab the value directly
                found = found[0].value;
            }

            // Ignore empty text fields when generating the query_string...
            if (found !== "") {
                query_part = name + "=" + found;
                if (query_string !== "") {
                    query_part = "&"+query_part;
                }
                query_string += query_part;
            }
            
            // Store the actual value of the metadata field so we can use it with a template...
            if (type === "text") {
                CHOOSER.STATE.metadata[name] = found;
                found = found === "" ? "" : name;
            }
            state[name] = found;
        }
    }

    // Finish up, set remaining CHOOSER.STATE vars and return if state has changed
    state.lang = "{{ form.misc.lang }}";
    CHOOSER.STATE.query_string = query_string;
    var state_changed = false;

    for (var param in state) {
        if (state.hasOwnProperty(param) && state[param] !== CHOOSER.STATE.current[param]) {
            CHOOSER.STATE.current = state;
            state_changed = true;
            break;
        }
    }

    return state_changed;
}


////
</script>


<style type="text/css">

/* z-order stuff for IE8... */
#freedoms {
    z-index: 4;
}
#license {
    z-index: 3;
}
#metadata {
    z-index: 2;
}
#internets {
    z-index: 1;
}


/* everything else: */

#instructional_fluff, #copyright_fluff {
    text-align: center;
    font-size: 16px;
    width: 800px;
    margin: auto;
    word-spacing: 1px;
}

#instructional_fluff {
    letter-spacing: 0px;
    margin-bottom: .2em;
}

#copyright_fluff {
    letter-spacing: 1px;
    margin-bottom: 1.5em;
}

#copyright_fluff span:first-of-type {
    padding-right: 1.6em;
}

#other_stuff {
    width: 800px;
    margin: auto;
    margin-top: 2em;
}

.ui_row {
    display: block;
    text-align: center;
    margin: 0px;
    padding: 0px;
    min-width: 840px;
}

#freedoms h4 {
    margin-left: 2em;
}
#freedoms select {
    margin-left: 5em;
}
#freedoms ul {
    margin-left: 5em;
    column-count: 2;
    -moz-column-count: 2;
    -webkit-column-count: 2;
    list-style: none;
}
#freedoms ul.no_columns {
    column-count: 1!important;
    -moz-column-count: 1!important;
    -webkit-column-count: 1!important;
    margin-top: -1em;
}

#freedoms label {
    float: none;
}

#field_jurisdiction {
    margin-left: 2em;
}

#license {
    text-align: center;
}

#license #badge {
    display: block;
    margin: auto;
    margin-top: 20px;
    margin-bottom: 8px;
}

#fc_logo_link, #badge_link {
    outline: 0px;
}

#fc_logo_link {
    display: block;
    width: 115px;
    height: 115px;
    position: absolute;
    left: 50%;
    bottom: 25px;
    margin-left: -55px;
}

#license .mini_deed {
    min-height: 224px;
    margin-top: 2em;
    padding-top: 1em;
    padding-bottom: 1em;
    border-top: 1px solid #393839;
    border-bottom: 1px solid #393839;
    position: relative;
}

#license .whatis, #license .whynot {
    font-size: 16px;
    font-weight: bold;
    padding-top: 1em;
    text-align: center;
}

#license .whynot {
    display: none;
}

.ui_box {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    display: inline-block;
    background-color: #f5f5f5;
    width: 400px;
    min-height: 363px; /* corresponds to height: 400px for some reason */
    padding: 32px;
    padding-bottom: 1px;
    margin: 10px 7px;
    border: 1px solid #393839;
    border-radius: 4px;
    vertical-align: text-top;
    text-align: left;
    position: relative; /* required for the arrows to work right */
}

.ui_box h2 {
    text-align: center;
}

#metadata ul {
    list-style: none;
    text-align: right;
    margin: 0px;
    margin-left: -18px;
    margin-right: -08px;
}
#metadata li {
    margin-top: 1.2em;
}
#metadata input,
#format_selection,
#metadata_format {
    display: block;
    width: 170px;
    float: right;
    margin-left: 1em;
}
#metadata li span {
    display: inline-block;
    margin-top: 4px;
    letter-spacing: -.2px;
}
#metadata li:last-of-type input {
    margin-bottom: 1em;
}

#internets {
    text-align: center;
    position: relative;
}
.results-preview {
    display: table;
    width: 334px;
    height: 150px;
    vertical-align: middle;
}
.results-preview div {
    display: table-cell;
    vertical-align: middle;
}

#copy_caption {
    position: absolute;
    bottom: 12em;
    left: 0px;
    font-weight: bold;
    text-align: center;
    width: 100%;
}
#xmp_download_box,
#infotocopy,
#codetocopy {
    display: block;
    position: absolute;
    bottom: 2em;
    left: 20px;
    width: 350px;
    height: 9em;
    resize: none;
}

#xmp_download_box {
    display: table!important;
    vertical-align: middle;
    border : 1px solid #444;
    border-radius: 8px;
}
#xmp_download_box div {
    display: table-cell;
    vertical-align: middle;
}


/* all arrows */
#freedoms:before,
#license:before,
#metadata:before {
    display: block;
    content: "";
    border: 0px;
    position: absolute;
    z-index: 10;
}

/* left arrows */
#content[dir="ltr"] #freedoms:before,
#content[dir="ltr"] #metadata:before {
    background-image: url("/wp-content/themes/creativecommons.org/images/left_arrow.png");
    width: 53px;
    height: 98px;
    top: 50%;
    right: 0px;
    margin-right: -53px;
    margin-top: -49px;
}

/* right arrows */
#content[dir="rtl"] #freedoms:before,
#content[dir="rtl"] #metadata:before {
    background-image: url("/wp-content/themes/creativecommons.org/images/right_arrow.png");
    width: 53px;
    height: 98px;
    top: 50%;
    left: 0px;
    margin-left: -53px;
    margin-top: -49px;
}

/* down arrow */
#license:before {
    background-image: url("/wp-content/themes/creativecommons.org/images/down_arrow.png");
    width: 98px;
    height: 53px;
    bottom: 0px;
    left: 50%;
    margin-bottom: -53px;
    margin-left: -49px;
}

@media only screen and (max-width: 399px) {
    /* Draw .ui_boxes in single column mode, remove margins and box sides */

    /* down arrow */
    #freedoms:before, 
    #license:before,
    #metadata:before {
        background-image: url("/wp-content/themes/creativecommons.org/images/down_arrow.png")!important;
        width: 98px!important;
        height: 53px!important;
        top: inherit!important;
        bottom: 0px!important;
        left: 50%!important;
        margin-bottom: -53px!important;
        margin-left: -49px!important;
    }
    .container,
    .sixteen.columns,
    .ui_row,
    #other_stuff,
    #chooser_form {
        min-width: 100%!important;
        width: 100%!important;
        margin: 0px!important;
    }
    .ui_row {;
        text-align: center;
    }
    .ui_box {
        width: 100%!important;
        height: inherit!important;
        border-radius: 0px;
        border-left: 0px;
        border-right: 0px;
        display: block;
        margin: 0px;;
        margin-bottom: 2em;
    }
    #license {
        padding-bottom: 3em;
    }
    #metadata {
        padding-bottom: 1em;
    }
    #metadata input,
    #format_selection,
    #metadata_format {
        width: 100%;
        margin: auto;
        float: none!important;
    }
    #field_jurisdiction {
        margin: auto!important;
        width: 100%!important;
    }
    .results-preview {
        width: 100%;
    }
    #xmp_download_box,
    #infotocopy,
    #codetocopy {
        left: 0px;
        margin: auto;
        width: 95%;
    }
    #copyright_fluff,
    #instructional_fluff {
        width: inherit!important;
    }
    #copyright_fluff span,
    #instructional_fluff span {
        display: block;
    }
}

@media only screen and (max-width: 817px) and (min-width: 400px) {
    /* Draw .ui_boxes in single column mode, and adjust margins */

    /* down arrow */
    #freedoms:before, 
    #license:before,
    #metadata:before {
        background-image: url("/wp-content/themes/creativecommons.org/images/down_arrow.png")!important;
        width: 98px!important;
        height: 53px!important;
        top: inherit!important;
        bottom: 0px!important;
        left: 50%!important;
        margin-bottom: -53px!important;
        margin-left: -49px!important;
    }
    .container,
    .sixteen.columns,
    .ui_row,
    #other_stuff,
    #chooser_form {
        min-width: 400px!important;
        width: inherit!important;
        margin: auto;
    }
    .ui_row {;
        text-align: center;
    }
    .ui_box {
        display: block;
        margin: auto;
        margin-bottom: 2em;
    }
    #copyright_fluff,
    #instructional_fluff {
        width: inherit!important;
    }
    #copyright_fluff span,
    #instructional_fluff span {
        display: block;
    }
}

@media only screen and (max-width: 839px) and (min-width: 818px) {
    /* Ensure entire quad is visible, minus outter margins. */
    .container,
    .sixteen.columns,
    #chooser_form {
        width: 818px!important;
        margin: auto!important;
    }
    .ui_row {
        min-width: 818px!important;
    }
    #freedoms, #metadata {
        margin-left: 0px;
    }
    #license, #internets {
        margin-right: 0px;
    }
}

@media only screen and (max-width: 960px) and (min-width: 840px) {
    /* Override page margins, so that the entire quad is visible correctly.*/
    .container,
    .sixteen.columns,
    #chooser_form {
        width: 840px!important;
        margin: auto!important;
    }
}



</style>
  
<noscript><style type="text/css">
.update_bar {
    background-color: black;
    color: white;
    width: 800px;
    margin: auto;
    padding: 5px;
    text-align: center;
    border-radius: 1em;
}
#content[dir="ltr"] .update_bar input {
    margin-left: 14em;
    background-color: white;
    color: black;
}
#content[dir="rtl"] .update_bar input {
    margin-right: 14em;
    background-color: white;
    color: black;
}
</style></noscript>


{% endblock headers %}
{% block body %}

<div id="instructional_fluff">
  <span>{% trans %}New to creative commons?{% endtrans %}</span>
  <span>[ <a href="/about/think">
    {%- trans %}Considerations before licensing{% endtrans -%}
  </a> ]</span>
  <span>[ <a href="/about/licenses">
    {%- trans %} How the licenses work {% endtrans -%}
  </a> ]</span>
</div>
<div id="copyright_fluff">
  <span><strong>
    {%- trans %}With this tool, you keep your copyright. {% endtrans -%}
  </strong></span>
  <span>[ <a href="http://creativecommons.org/publicdomain/">
    {%- trans %}Want public domain instead?{% endtrans -%}
  </a> ]</span>
</div>


<form action="." method="get" id="chooser_form">
<noscript>
  <div class="update_bar">
    {% trans %}Javascript is disabled.{% endtrans %}
    <input type="submit" 
           value="{% trans %}Update Selected License{% endtrans %}"/>
  </div>
  <input type="hidden" name="lang" value="{{ form.misc.lang }}" />
</noscript>

<div class="ui_row">
  <div id="freedoms" class="ui_box">
    <h2>{% trans %}License Features{% endtrans %}</h2>
    <h4>{% trans %}Allow modification to your work?{% endtrans %}</h4>
      <ul>
        <li>
          <input type="radio"
                 {% if not form.license.nd and not form.license.sa -%}
                 checked="checked"{% endif %}
                 name="field_derivatives" value="y"
                 id="question_3-5" />
          <label for="question_3-5">{% trans %}Yes{% endtrans %}</label>
        </li>
        <li>
          <input type="radio"  name="field_derivatives" value="n"
                 {% if form.license.nd %}checked="checked"{% endif %}
                 id="question_3-7" />
          <label for="question_3-7">{% trans %}No{% endtrans %}</label>
        </li>
      </ul>
      <ul class="no_columns">
        <li>
          <input type="radio" name="field_derivatives" value="sa"
                 {% if form.license.sa %}checked="checked"{% endif %}
                 id="question_3-6" />
          <label for="question_3-6">
              {% trans %}Yes, as long as others share alike{% endtrans %}
          </label>
        </li>
      </ul>

    <h4>{% trans %}Allow commercial use of your work?{% endtrans %}</h4>
    <ul>
      <li>
        <input type="radio"
               {%- if not form.license.nc %} checked="checked" {% endif -%}
               name="field_commercial" value="y" id="question_2-3"/>
        <label for="question_2-3">{% trans %}Yes{% endtrans %}</label>
      </li>
      <li>
        <input type="radio"
               {%- if form.license.nc %} checked="checked" {% endif -%}
               name="field_commercial" value="n" id="question_2-4"/>
        <label for="question_2-4">{% trans %}No{% endtrans %}</label>
      </li>
    </ul>
    </p>
    <h4>{% trans %}License Jurisdiction{% endtrans %}:</h4>
    <select id="field_jurisdiction" name="field_jurisdiction">
      {# If a specific jurisdiction is requested, we'll mark that
       # as selected.  Otherwise util.International should be selected. #}
      <option value=""
              {% if form.license.jurisdiction == "" -%}
              selected="selected"
              {%- endif %}>
        {% trans %}International{% endtrans %}
      </option>
      {% for juris_code, juris_name in jurisdictions_names %}
      <option value="{{ juris_code }}"
              {% if form.license.jurisdiction == juris_code -%}
              selected="selected"
              {%- endif %}>
        {{- juris_name -}}
      </option>
      {% endfor %}
    </select>
    <h4>{% trans %}Icon Size{% endtrans %}:</h4>
    <ul>
      <li>
        <input type="radio" {% if form.out.badge == "normal" -%}
               checked="checked" {% endif -%}
               name="field_iconsize" value="normal" id="extracredit_1-1"/>
        <label for="extracredit_1-1">{% trans %}Normal{% endtrans %}</label>
      </li>
      <li>
        <input type="radio" {% if form.out.badge == "small" -%}
               checked="checked" {% endif -%}
               name="field_iconsize" value="small" id="extracredit_1-2"/>
        <label for="extracredit_1-2">{% trans %}Compact{% endtrans %}</label>
      </li>
    </ul>
  </div>




  <div id="license" class="ui_box">
    <h2>{% trans %}Selected License{% endtrans %}</h2>
    <div class="mini_deed">
      <a id="badge_link" href="">
        <img id="badge" src="{{ license_logo }}"/>
      </a>
      <a id="license_title" href="{{ license.uri }}">{{ license_title }}</a>

      <a id="fc_logo_link" href="http://freedomdefined.org/Definition">
        <img src="/wp-content/themes/creativecommons.org/images/
                  {%- if license.libre -%}fc_approved_small.png
                  {%- else -%}fc_questionable.png{% endif %}"
             class="logo fc_status" />
      </a>
    </div>
    <div class="whatis" {% if not license.libre -%}
         style="display: none;"{% endif %}>
      <a href="http://freedomdefined.org/Definition">
        {%- trans %}What is free culture?{% endtrans -%}
      </a>
    </div>
    <div class="whynot" {% if not license.libre -%}
         style="display: block;"{% endif %}>
      <a href="http://freedomdefined.org/Definition">
        {%- trans %}Why is this not a free culture license?{% endtrans -%}
      </a>
    </div>
  </div>
</div>




<div class="ui_row">
  <div id="metadata" class="ui_box">
    <h2>{% trans %}Help others attribute you!{% endtrans %}</h2>
    {% trans %}This part is optional, but filling it out will add machine readable metadata to the embedable HTML!{% endtrans %}

    <ul>
      <li>
        <span>{% trans %}Metadata format{% endtrans %}</span>
        <select id="metadata_format" name="field_metadata_standard">
          <option value="html+rdfa" 
                  {%- if form.meta.standard == "html+rdfa" %} selected="selected"
                  {%- endif %}>HTML+RDFA</option>
          <option value="xmp"
                  {%- if form.meta.standard == "xmp" %} selected="selected"
                  {%- endif %}>XMP</option>
          <option value="offline"
                  {%- if form.meta.standard == "offline" %} selected="selected"
                  {%- endif %}>{% trans %}Offline{% endtrans %}</option>
        </select>
      </li>

      <li>
        <span for="field_format">
          {% trans %}Format of work{% endtrans %}
        </span>
        <select id="format_selection" name="field_format">
          <option value="" 
                  {%- if form.meta.format == "" %} selected="selected"
                  {%- endif %}>
            {% trans %}Other{% endtrans %}</option>
          <option value="Sound"
                  {%- if form.meta.format == "Sound" %} selected="selected"
                  {%- endif %}>
            {% trans %}Audio{% endtrans %}</option>
          <option value="MovingImage"
                  {%- if form.meta.format == "MovingImage" %} selected="selected"
                  {%- endif %}>
            {% trans %}Video{% endtrans %}</option>
          <option value="StillImage"
                  {%- if form.meta.format == "StillImage" %} selected="selected"
                  {%- endif %}>
            {% trans %}Image{% endtrans %}</option>
          <option value="Text"
                  {%- if form.meta.format == "Text" %} selected="selected"
                  {%- endif %}>
            {% trans %}Text{% endtrans %}</option>
          <option value="Dataset"
                  {%- if form.meta.format == "Dataset" %} selected="selected"
                  {%- endif %}>
            {% trans %}Dataset{% endtrans %}</option>
          <option value="InteractiveResource"
                  {%- if form.meta.format == "InteractiveResource" %} selected="selected"{% endif %}>
            {% trans %}Interactive{% endtrans %}</option>
        </select>
      </li>

      <li>
        <span for="field_worktitle">
          {%- trans %}Title of work{% endtrans -%}
        </span>
        <input type="text" name="field_worktitle" 
               value="{{ form.meta.title }}" />
      </li>

      <li>
        <span for="field_attribute_to_name">
          {%- trans %}Attribute work to name{% endtrans -%}
        </span>
        <input type="text" name="field_attribute_to_name" 
               value="{{ form.meta.attrib_name }}"/>
      </li>
      
      <li>
        <span for="field_attribute_to_url">
          {%- trans %}Attribute work to URL{% endtrans -%}
        </span>
        <input type="text" name="field_attribute_to_url" 
               value="{{ form.meta.attrib_url }}" />
      </li>

      <li>
        <span for="field_sourceurl">
          {%- trans %}Source work URL{% endtrans -%}
        </span>
        <input type="text" name="field_sourceurl" 
               value="{{ form.meta.src_url }}"/>
      </li>

      <li>
        <span for="field_morepermissionsurl">
          {%- trans %}More permissions URL{% endtrans -%}
        </span>
        <input type="text" name="field_morepermissionsurl"
               value="{{ form.meta.permissions }}"/>
      </li>
    </ul>
  </div>
  

  <div id="internets" class="ui_box">


    <div id="for_htmlrdfa" {% if form.meta.standard != "html+rdfa" %}style="display:none"{% endif %}>
      <h2>{% trans %}Have a web page?{% endtrans %}</h2>
      <div class="results-preview"><div>{{ license_html|safe }}</div></div>
      <div id="copy_caption">
        {%- trans %}Copy this code to let your visitors know!{% endtrans -%}
      </div>
      <textarea id="codetocopy" readonly="readonly">{{ license_html }}</textarea>
    </div>


    <div id="for_xmp" {% if form.meta.standard != "xmp" %}style="display:none"{% endif %}>
      <h2>{% trans %}XMP Embeded Metadata{% endtrans %}</h2>

      <div class="results-preview"><div>
          <p>
            {% trans %}CC metadata can be embedded into images and other many other file formats!  <a href="http://wiki.creativecommons.org/XMP">See the wiki for more info</a>.
            {% endtrans %}
          </p>
      </div></div>
      <div id="xmp_download_box"><div>
        {% trans license_name=license.title(target_lang) -%}
        <a id="xmp_download_link" href="/choose/metadata.xmp?{{ last_query }}">Download metadata.xmp</a> for <br/> <span id="xmp_license_name">{{ license_name }}</span>{% endtrans %}
      </div></div>
    </div>
    

    <div id="for_offline" {% if form.meta.standard != "offline" %}style="display:none"{% endif %}>
      <h2>{% trans %}Non-digital works?{% endtrans %}</h2>
      
      <div class="results-preview"><div>
          <p><a href="http://creativecommons.org/about/downloads/">
              {%- trans %}Downloadable license graphics.{% endtrans -%}
          </a></p>
          <p><a href="http://wiki.creativecommons.org/Marking/Creators#Marking_Specific_Media">
              {%- trans %}How to mark video and other media formats.{% endtrans -%}
          </a></p>
          <p>{% trans %}To mark a document not on the web, add the following text to your work:{% endtrans %}</p>
      </div></div>
          
      <textarea id="infotocopy" readonly="readonly">
        {%- trans license_name=license.title(target_lang), license_url=license.uri -%}
          This work is licensed under the Creative Commons {{ license_name }} License. To view a copy of this license, visit {{ license_url }} or send a letter to Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.
        {%- endtrans -%}
      </textarea>
    </div>
  </div>


</div>


<noscript>
  <div class="update_bar">
    {% trans %}Javascript is disabled.{% endtrans %}
    <input type="submit"
           value="{% trans %}Update Selected License{% endtrans %}"/>
  </div>
</noscript>
</form>


<div id="other_stuff">
  <div id="chooserDonate">
    <div>
      <a href="https://creativecommons.net/donate/"><img src="/images/support/2010/cc-support.png" alt="Donate" title="Donate" border="0"/></a></div>
    <p>
      {% trans %}Creative Commons is a non-profit organization.<br /> We need your support to continue providing these tools.<br /> <a href="https://creativecommons.net/donate/">Donate today!</a>{% endtrans %}
    </p>
  </div>
  {% include "includes/engine_languages.html" %}
</div>
{% endblock %}
